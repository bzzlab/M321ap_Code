apiVersion: apps/v1
# for the deployment
#??
metadata:
  # name is sh-app1
#??
spec:
  # 1 replica
#??
  selector:
    # label should match app=sh-app1
#??
#??
  template:
    metadata:
      # labe is app=sh-app1
#??
#??
    spec:
      # termination grace period 60 is seconds
#??
      # container is named app-container
      # pulled from your registry and
      # with port according to your app.
#??
#??
#??
#??
#??
          readinessProbe:
            # by http-get on endpoint /healthz
            # and corresponding port
#??
#??
#??
            initialDelaySeconds: 2
            periodSeconds: 2
            failureThreshold: 3
          livenessProbe:
            # by http-get on endpoint /healthz
            # and corresponding port
#??
#??
#??
            initialDelaySeconds: 10
            periodSeconds: 5
            failureThreshold: 3
          lifecycle:
            preStop:
              exec:
                # call internal shutdown endpoint so app can signal readiness->false and begin shutdown
#??
---
apiVersion: v1
# for the service
#??
metadata:
  # name is sh-app1
#??
spec:
  selector:
    # label should match app=sh-app1
#??
  # ports -> port and target port
  # according to your app.
#??
#??
#??
  # type of service is cluster ip
#??