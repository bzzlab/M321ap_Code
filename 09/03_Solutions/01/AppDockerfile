# Implement docker healthcheck and stopsignal using dockerfile
# Containerize a simple flask deploy
# ---------------------------------------------------------
# Install ubuntu 18.04
FROM ubuntu:18.04
# Update and install python-pip,-dev and curl
# Clean OS from installation files
RUN apt-get update -y \
    && apt-get install -y python3-pip python3-dev curl \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/*
# Copy the current directory contents into the container at /app
COPY ./deploy /index
# Set the working directory
WORKDIR /index
# Install the Python packages specified in requirements.txt
RUN pip3 install --no-cache-dir -r requirements.txt
# Make port 4000 available to the world outside this container
EXPOSE 4000
ENV LC_ALL=C.UTF-8
ENV LANG=C.UTF-8
# call python app
CMD [ "python3", "-m" , "flask", "run", "--host=0.0.0.0"]
